<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mailthon Middleware &mdash; Python Notes 0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/css/customizations.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Python Notes 0 documentation" href="../../../index.html" />
    <link rel="up" title="mailthon" href="../mailthon.html" />
    <link rel="next" title="Mailthon and the Standard Email Library" href="../mailthon_and_email/mailthon_and_email.html" />
    <link rel="prev" title="Mailthon Headers" href="../mailthon_headers/mailthon_headers.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mailthon-middleware">
<span id="id1"></span><h1>Mailthon Middleware<a class="headerlink" href="#mailthon-middleware" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal"><span class="pre">mailthon</span></code> allows us to plug middleware into our SMTP connection so that we can interact with other features of our SMTP server. It&#8217;s important to note that the middleware can only interact with with the SMTP server connection object, and nothing else. Any middleware made will depend solely on the different commands and interactions the SMTP server provides.</p>
<div class="section" id="middleware-basics">
<h2>Middleware Basics<a class="headerlink" href="#middleware-basics" title="Permalink to this headline">¶</a></h2>
<p>The minimum requirements for a working <code class="docutils literal"><span class="pre">Middleware</span></code> is to override <code class="docutils literal"><span class="pre">Middleware.__call__(self,</span> <span class="pre">conn)</span></code>. This method is supplied an <code class="docutils literal"><span class="pre">smtplib.SMTP</span></code> connection object before an email has been passed to the SMTP server.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mailthon</span>
<span class="kn">from</span> <span class="nn">mailthon.middleware</span> <span class="k">import</span> <span class="n">Middleware</span>

<span class="k">class</span> <span class="nc">HelpMiddlware</span><span class="p">(</span><span class="n">Middleware</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">docmd</span><span class="p">(</span><span class="s2">&quot;HELP&quot;</span><span class="p">)</span>  <span class="c1"># conn is an smtplib.SMTP connection</span>
        <span class="nb">print</span> <span class="s2">&quot;SMTP servers response from HELP:</span><span class="se">\n\&quot;</span><span class="si">{}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">postman</span> <span class="o">=</span> <span class="n">mailthon</span><span class="o">.</span><span class="n">postman</span><span class="p">(</span><span class="s2">&quot;gmail.com&quot;</span><span class="p">)</span>
<span class="n">postman</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">HelpMiddlware</span><span class="p">())</span>
</pre></div>
</div>
<p>As shown above, we attach our new middleware as an obstantiate object to <code class="docutils literal"><span class="pre">Postman</span></code> using <code class="docutils literal"><span class="pre">Postman.use()</span></code>. Alternatively you can assign middlewares to a <code class="docutils literal"><span class="pre">Postman</span></code> on obstantiation in a list.</p>
<p>Note that <code class="docutils literal"><span class="pre">mailthon.postman</span></code> is a function that obstantiates a <code class="docutils literal"><span class="pre">Postman</span></code> with <code class="docutils literal"><span class="pre">TLS</span></code> and <code class="docutils literal"><span class="pre">Auth</span></code> already attached and not the initialization of a <code class="docutils literal"><span class="pre">Postman</span></code> object itself.</p>
<div class="section" id="more-about-auth-and-tls">
<h3>More about Auth and TLS<a class="headerlink" href="#more-about-auth-and-tls" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">mailthon</span></code> comes pre-packaged with <code class="docutils literal"><span class="pre">Auth</span></code>, a middleware for authenticating users to an SMTP server, and <code class="docutils literal"><span class="pre">TLS</span></code> a middleware that implements TLS connections if possible.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Mailthon Middleware</a><ul>
<li><a class="reference internal" href="#middleware-basics">Middleware Basics</a><ul>
<li><a class="reference internal" href="#more-about-auth-and-tls">More about Auth and TLS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../mailthon.html">mailthon</a><ul>
      <li>Previous: <a href="../mailthon_headers/mailthon_headers.html" title="previous chapter">Mailthon Headers</a></li>
      <li>Next: <a href="../mailthon_and_email/mailthon_and_email.html" title="next chapter">Mailthon and the Standard Email Library</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/python_libraries/mailthon/mailthon_middleware/mailthon_middleware.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Maxwell G. Brown.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../../../_sources/python_libraries/mailthon/mailthon_middleware/mailthon_middleware.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>